{"version":3,"sources":["functional/functional-tests.js"],"names":["os","require","stream","crypto","async","_","fs","http","https","url","chai","assert","superagent","uuid","step","minio","err","install","describe","timeout","playConfig","process","env","res","split","endPoint","port","parseInt","accessKey","secretKey","undefined","useSSL","dataDir","partSize","client","Client","usEastConfig","region","clientUsEastRegion","bucketName","v4","objectName","_1byteObjectName","_1byte","readFileSync","Buffer","alloc","_100kbObjectName","_100kb","_100kbObjectNameCopy","_100kbObjectBufferName","_MultiPath100kbObjectBufferName","_100kbmd5","createHash","update","digest","_100kb1kboffsetmd5","slice","_65mbObjectName","_65mb","_65mbmd5","_65mbObjectNameCopy","_5mbObjectName","_5mb","_5mbmd5","httpAgent","Agent","keepAlive","setRequestOptions","agent","metaData","tmpDir","tmpdir","readableStream","data","s","Readable","_read","push","traceStream","filePath","stdout","createWriteStream","flags","write","traceOn","before","done","makeBucket","after","removeBucket","traceOff","end","listBuckets","e","buckets","find","name","Error","then","catch","fail","setTimeout","bucketExists","exists","code","putObject","hash","getObject","on","removeObject","tmpFileUpload","writeFileSync","fPutObject","statObject","stat","tmpFileUploadWithExt","length","getPartialObject","expectedHash","Object","values","sockets","copyObject","size","map","cb","etag","modifiedDate","equal","conds","CopyConditions","setMatchETagExcept","setMatchETag","setUnmodified","Date","initiateNewMultipartUpload","host","includes","skip","found","listIncompleteUploads","key","removeIncompleteUpload","tmpFileDownload","fGetObject","md5sum","unlinkSync","localFile","resp","bufPart","copy","tmpFile","policy","setBucketPolicy","getBucketPolicy","response","presignedPutObject","presignedUrl","transport","options","pick","parse","method","headers","protocol","request","statusCode","presignedGetObject","error","toString","requestDate","setHours","respHeaders","newPostPolicy","setKey","setBucket","expires","setSeconds","setExpires","presignedPostPolicy","req","post","postURL","each","formData","value","field","attach","from","str","callback","match","chunk","listObjectPrefix","listObjectsNum","objArray","listArray","listPrefixArray","times","i","sort","mapLimit","listObjects","isEqual","listObjectsV2","extensions","listObjectsV2WithMetadata","objectsList","removeObjects","poller","listenBucketNotification","message","records","pollerError","record","eventName","s3","bucket","object","stop","removeAllListeners","versionedBucketName","getBucketVersioning","setBucketVersioning","Status","versioned_100kbObjectName","versioned_100kb_Object","versionId","dataStream","objVersion","prefixName","versionedObjectName","objVersionIdCounter","isVersioningSupported","objNameWithPrefix","count","forEach","IncludeVersion","item","objVersionList","tagsBucketName","setBucketTagging","getBucketTagging","tagList","removeBucketTagging","tagObjName","tagObject","setObjectTagging","getObjectTagging","removeObjectTagging","tagsVersionedBucketName","lifecycleConfig","Rule","setBucketLifecycle","getBucketLifecycle","removeBucketLifecycle","versionedPresignObjName","_100_byte","_200_byte","putPreSignedObject","_incoming_obj","mobileClientReqWithProtocol","upldRequestOptions","uploadRequest","objectsStream","obj","VersionId","Key","getReqOpts","hashValue","objItem","lockEnabledBucketName","isFeatureSupported","ObjectLocking","getObjectLockConfig","lockConfigBucketName","setObjectLockConfig","mode","unit","validity","objRetentionBucket","retentionObjName","expirationDate","setDate","getDate","setUTCHours","putObjectRetention","governanceBypass","retainUntilDate","toISOString","getObjectRetention","encBucketName","encObjName","encObjFileContent","isEncryptionSupported","buckEncPromise","setBucketEncryption","getBucEncObj","getBucketEncryption","putObjPromise","statObjPromise","getBuckEnc","removeObj","removeBucketEncryption","objLegalHoldBucketName","objLegalHoldObjName","setObjectLegalHold","status","getObjectLegalHold"],"mappings":"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","sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst os = require('os')\nconst stream = require('stream')\nconst crypto = require('crypto')\nconst async = require('async')\nconst _ = require('lodash')\nconst fs = require('fs')\nconst http = require('http')\nconst https = require('https')\nconst url = require('url')\nconst chai = require('chai')\nconst assert = chai.assert\nconst superagent = require('superagent')\nconst uuid = require(\"uuid\")\nconst step = require(\"mocha-steps\").step\nimport { getVersionId, isArray } from \"../../../dist/main/helpers\"\nlet minio\n\ntry {\n  minio = require('../../../dist/main/minio')\n} catch (err) {\n  minio = require('minio')\n}\n\nrequire('source-map-support').install()\n\ndescribe('functional tests', function() {\n  this.timeout(30 * 60 * 1000)\n  var playConfig = {}\n  // If credentials aren't given, default to play.min.io.\n  if (process.env['SERVER_ENDPOINT']) {\n    var res = process.env['SERVER_ENDPOINT'].split(\":\")\n    playConfig.endPoint = res[0]\n    playConfig.port = parseInt(res[1])\n  } else {\n    playConfig.endPoint = 'play.min.io'\n    playConfig.port = 9000\n  }\n  playConfig.accessKey = process.env['ACCESS_KEY'] || 'Q3AM3UQ867SPQQA43P2F'\n  playConfig.secretKey = process.env['SECRET_KEY'] || 'zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG'\n\n  // If the user provides ENABLE_HTTPS, 1 = secure, anything else = unsecure.\n  // Otherwise default useSSL as true.\n  if (process.env['ENABLE_HTTPS'] !== undefined) {\n    playConfig.useSSL = (process.env['ENABLE_HTTPS'] == '1')\n  } else {\n    playConfig.useSSL = true\n  }\n  // dataDir is falsy if we need to generate data on the fly. Otherwise, it will be\n  // a directory with files to read from, i.e. /mint/data.\n  var dataDir = process.env['MINT_DATA_DIR']\n\n  // set the partSize to ensure multipart upload chunk size.\n  // if not set, putObject with stream data and undefined length will use about 500Mb chunkSize (5Tb/10000).\n  playConfig.partSize = 64 * 1024 * 1024\n\n  var client = new minio.Client(playConfig)\n  var usEastConfig = playConfig\n  usEastConfig.region = 'us-east-1'\n  var clientUsEastRegion = new minio.Client(usEastConfig)\n\n  var bucketName = \"minio-js-test-\" + uuid.v4()\n  var objectName = uuid.v4()\n\n  var _1byteObjectName = 'datafile-1-b'\n  var _1byte = dataDir ? fs.readFileSync(dataDir + '/' + _1byteObjectName) : Buffer.alloc(1, 0)\n\n  var _100kbObjectName = 'datafile-100-kB'\n  var _100kb = dataDir ? fs.readFileSync(dataDir + '/' + _100kbObjectName) : Buffer.alloc(100 * 1024, 0)\n  var _100kbObjectNameCopy = _100kbObjectName + '-copy'\n\n  var _100kbObjectBufferName = `${_100kbObjectName}.buffer`\n  var _MultiPath100kbObjectBufferName = `path/to/${_100kbObjectName}.buffer`\n  var _100kbmd5 = crypto.createHash('md5').update(_100kb).digest('hex')\n  var _100kb1kboffsetmd5 = crypto.createHash('md5').update(_100kb.slice(1024)).digest('hex')\n\n  var _65mbObjectName = 'datafile-65-MB'\n  var _65mb = dataDir ? fs.readFileSync(dataDir + '/' + _65mbObjectName) : Buffer.alloc(65 * 1024 * 1024, 0)\n  var _65mbmd5 = crypto.createHash('md5').update(_65mb).digest('hex')\n  var _65mbObjectNameCopy = _65mbObjectName + '-copy'\n\n  var _5mbObjectName = 'datafile-5-MB'\n  var _5mb = dataDir ? fs.readFileSync(dataDir + '/' + _5mbObjectName) : Buffer.alloc(5 * 1024 * 1024, 0)\n  var _5mbmd5 = crypto.createHash('md5').update(_5mb).digest('hex')\n\n  // create new http agent to check requests release sockets\n  var httpAgent = (playConfig.useSSL ? https : http).Agent({ keepAlive: true })\n  client.setRequestOptions({ agent: httpAgent })\n\n  var metaData = {\n    'Content-Type': 'text/html',\n    'Content-Language': 'en',\n    'X-Amz-Meta-Testing': 1234,\n    'randomstuff': 5678\n  }\n\n  var tmpDir = os.tmpdir()\n    \n  function readableStream(data) {\n    var s = new stream.Readable()\n    s._read = () => {}\n    s.push(data)\n    s.push(null)\n    return s\n  }\n  \n  var traceStream\n\n  // FUNCTIONAL_TEST_TRACE env variable contains the path to which trace\n  // will be logged. Set it to /dev/stdout log to the stdout.\n  if (process.env['FUNCTIONAL_TEST_TRACE']) {\n    var filePath = process.env['FUNCTIONAL_TEST_TRACE']\n    // This is necessary for windows.\n    if (filePath === 'process.stdout') {\n      traceStream = process.stdout\n    } else {\n      traceStream = fs.createWriteStream(filePath, { flags: 'a' })\n    }\n    traceStream.write('====================================\\n')\n    client.traceOn(traceStream)\n  }\n\n  before(done => client.makeBucket(bucketName, '', done))\n  after(done => client.removeBucket(bucketName, done))\n\n  if (traceStream) {\n    after(() => {\n      client.traceOff()\n      if (filePath !== 'process.stdout') {\n        traceStream.end()\n      }\n    })\n  }\n\n  describe('makeBucket with period and region', () => {\n    if (playConfig.endPoint === 's3.amazonaws.com') {\n      step('makeBucket(bucketName, region, cb)_region:eu-central-1_', done => client.makeBucket(`${bucketName}.sec.period`,\n                                                                                                'eu-central-1', done))\n      step('removeBucket(bucketName, cb)__', done => client.removeBucket(`${bucketName}.sec.period`, done))\n    }\n  })\n\n  describe('listBuckets', () => {\n    step('listBuckets(cb)__', done => {\n      client.listBuckets((e, buckets) => {\n        if (e) return done(e)\n        if (_.find(buckets, { name: bucketName })) return done()\n        done(new Error('bucket not found'))\n      })\n    })\n    step('listBuckets()__', done => {\n      client.listBuckets()\n        .then(buckets => {\n          if (!_.find(buckets, { name: bucketName }))\n            return done(new Error('bucket not found'))\n        })\n        .then(() => done())\n        .catch(done)\n    })\n  })\n\n  describe('makeBucket with region', () => {\n    step(`makeBucket(bucketName, region, cb)_bucketName:${bucketName}-region, region:us-east-2_`, done => {\n      try {\n        clientUsEastRegion.makeBucket(`${bucketName}-region`, 'us-east-2', assert.fail)\n      } catch (e) {\n        done()\n      }\n    })\n    step(`makeBucket(bucketName, region, cb)_bucketName:${bucketName}-region, region:us-east-1_`, done => {\n      clientUsEastRegion.makeBucket(`${bucketName}-region`, 'us-east-1', done)\n    })\n    step(`removeBucket(bucketName, cb)_bucketName:${bucketName}-region_`, done => {\n      clientUsEastRegion.removeBucket(`${bucketName}-region`, done)\n    })\n    step(`makeBucket(bucketName, region)_bucketName:${bucketName}-region, region:us-east-1_`, done => {\n      clientUsEastRegion.makeBucket(`${bucketName}-region`, 'us-east-1', (e)=>{\n        if (e) {\n          // Some object storage servers like Azure, might not delete a bucket rightaway\n          // Add a sleep of 40 seconds and retry\n          setTimeout(() => {\n            clientUsEastRegion.makeBucket(`${bucketName}-region`, 'us-east-1', done)\n          }, 40 * 1000)\n        } else done()\n      })\n    })\n    step(`removeBucket(bucketName)_bucketName:${bucketName}-region_`, done => {\n      clientUsEastRegion.removeBucket(`${bucketName}-region`)\n        .then(() => done())\n        .catch(done)\n    })\n  })\n\n  describe('bucketExists', () => {\n    step(`bucketExists(bucketName, cb)_bucketName:${bucketName}_`, done => client.bucketExists(bucketName, done))\n    step(`bucketExists(bucketName, cb)_bucketName:${bucketName}random_`, done => {\n      client.bucketExists(bucketName + 'random', (e, exists) => {\n        if (e === null && !exists) return done()\n        done(new Error())\n      })\n    })\n    step(`bucketExists(bucketName)_bucketName:${bucketName}_`, done => {\n      client.bucketExists(bucketName)\n        .then(() => done())\n        .catch(done)\n    })\n  })\n\n\n  describe('removeBucket', () => {\n    step(`removeBucket(bucketName, cb)_bucketName:${bucketName}random_`, done => {\n      client.removeBucket(bucketName + 'random', (e) => {\n        if (e.code === 'NoSuchBucket') return done()\n        done(new Error())\n      })\n    })\n    step(`makeBucket(bucketName, region)_bucketName:${bucketName}-region-1, region:us-east-1_`, done => {\n      client.makeBucket(`${bucketName}-region-1`, 'us-east-1')\n        .then(() => client.removeBucket(`${bucketName}-region-1`))\n        .then(() => done())\n        .catch(done)\n    })\n  })\n  describe('tests for putObject getObject removeObject with multipath', function() {\n    step(`putObject(bucketName, objectName, stream)_bucketName:${bucketName}, objectName:${_MultiPath100kbObjectBufferName}, stream:100Kib_`, done => {\n      client.putObject(bucketName, _MultiPath100kbObjectBufferName, _100kb)\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`getObject(bucketName, objectName, callback)_bucketName:${bucketName}, objectName:${_MultiPath100kbObjectBufferName}_`, done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _MultiPath100kbObjectBufferName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _100kbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    step(`removeObject(bucketName, objectName)_bucketName:${bucketName}, objectName:${_MultiPath100kbObjectBufferName}_`, done => {\n      client.removeObject(bucketName, _MultiPath100kbObjectBufferName)\n        .then(() => done())\n        .catch(done)\n    })\n\n  })\n  describe('tests for putObject copyObject getObject getPartialObject statObject removeObject', function() {\n    var tmpFileUpload = `${tmpDir}/${_100kbObjectName}`\n    step(`fPutObject(bucketName, objectName, filePath, metaData, callback)_bucketName:${bucketName}, objectName:${_100kbObjectName}, filePath: ${tmpFileUpload}_`, done => {\n      fs.writeFileSync(tmpFileUpload, _100kb)\n      client.fPutObject(bucketName, _100kbObjectName, tmpFileUpload,done)\n    })\n\n    step(`statObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_100kbObjectName}_`, done => {\n      client.statObject(bucketName, _100kbObjectName, (e, stat) => {\n        if (e) return done(e)\n        // As metadata is not provided and there is no file extension,\n        // we default to 'application/octet-stream' as per `probeContentType` function\n        if (stat.metaData && stat.metaData['content-type'] !== 'application/octet-stream') {\n          return done(new Error('content-type mismatch'))\n        }\n        done()\n      })\n    })\n\n    var tmpFileUploadWithExt = `${tmpDir}/${_100kbObjectName}.txt`\n    step(`fPutObject(bucketName, objectName, filePath, metaData, callback)_bucketName:${bucketName}, objectName:${_100kbObjectName}, filePath: ${tmpFileUploadWithExt}, metaData:${metaData}_`, done => {\n      fs.writeFileSync(tmpFileUploadWithExt, _100kb)\n      client.fPutObject(bucketName, _100kbObjectName, tmpFileUploadWithExt, metaData, done)\n    })\n\n    step(`statObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_100kbObjectName}_`, done => {\n      client.statObject(bucketName, _100kbObjectName, (e, stat) => {\n        if (e) return done(e)\n        // As metadata is provided, even though we have an extension,\n        // the `content-type` should be equal what was declared on the metadata\n        if (stat.metaData && stat.metaData['content-type'] !== 'text/html') {\n          return done(new Error('content-type mismatch'))\n        } else if (!stat.metaData) {\n          return done(new Error('no metadata present'))\n        }\n        done()\n      })\n    })\n\n    step(`fPutObject(bucketName, objectName, filePath, metaData, callback)_bucketName:${bucketName}, objectName:${_100kbObjectName}, filePath: ${tmpFileUploadWithExt}_`, done => {\n      fs.writeFileSync(tmpFileUploadWithExt, _100kb)\n      client.fPutObject(bucketName, _100kbObjectName, tmpFileUploadWithExt, done)\n    })\n\n    step(`statObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_100kbObjectName}_`, done => {\n      client.statObject(bucketName, _100kbObjectName, (e, stat) => {\n        if (e) return done(e)\n        // As metadata is not provided but we have a file extension,\n        // we need to infer `content-type` from the file extension\n        if (stat.metaData && stat.metaData['content-type'] !== 'text/plain') return done(new Error('content-type mismatch'))\n        done()\n      })\n    })\n\n    step(`putObject(bucketName, objectName, stream, size, metaData, callback)_bucketName:${bucketName}, objectName:${_100kbObjectName}, stream:100kb, size:${_100kb.length}, metaData:${metaData}_`, done => {\n      var stream = readableStream(_100kb)\n      client.putObject(bucketName, _100kbObjectName, stream, _100kb.length, metaData, done)\n    })\n\n    step(`putObject(bucketName, objectName, stream, size, metaData, callback)_bucketName:${bucketName}, objectName:${_100kbObjectName}, stream:100kb, size:${_100kb.length}_`, done => {\n      var stream = readableStream(_100kb)\n      client.putObject(bucketName, _100kbObjectName, stream, _100kb.length, done)\n    })\n\n    step(`getObject(bucketName, objectName, callback)_bucketName:${bucketName}, objectName:${_100kbObjectName}_`, done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _100kbObjectName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _100kbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    step(`putObject(bucketName, objectName, stream, callback)_bucketName:${bucketName}, objectName:${_100kbObjectBufferName}, stream:100kb_`, done => {\n      client.putObject(bucketName, _100kbObjectBufferName, _100kb, '', done)\n    })\n\n    step(`getObject(bucketName, objectName, callback)_bucketName:${bucketName}, objectName:${_100kbObjectBufferName}_`, done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _100kbObjectBufferName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _100kbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    step(`putObject(bucketName, objectName, stream, metaData)_bucketName:${bucketName}, objectName:${_100kbObjectBufferName}, stream:100kb_, metaData:{}`, done => {\n      client.putObject(bucketName, _100kbObjectBufferName, _100kb, {})\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`getPartialObject(bucketName, objectName, offset, length, cb)_bucketName:${bucketName}, objectName:${_100kbObjectBufferName}, offset:0, length=1024_`, done => {\n      client.getPartialObject(bucketName, _100kbObjectBufferName, 0, 1024)\n        .then(stream => {\n          stream.on('data', function() {})\n          stream.on('end', done)\n        })\n        .catch(done)\n    })\n\n    step(`getPartialObject(bucketName, objectName, offset, length, cb)_bucketName:${bucketName}, objectName:${_100kbObjectBufferName}, offset:1024, length=1024_`, done => {\n      var expectedHash = crypto.createHash('md5').update(_100kb.slice(1024,2048)).digest('hex')\n      var hash = crypto.createHash('md5')\n      client.getPartialObject(bucketName, _100kbObjectBufferName, 1024, 1024)\n        .then(stream => {\n          stream.on('data', data => hash.update(data))\n          stream.on('end', () => {\n            if (hash.digest('hex') === expectedHash) return done()\n            done(new Error('content mismatch'))\n          })\n        })\n        .catch(done)\n    })\n\n    step(`getPartialObject(bucketName, objectName, offset, length, cb)_bucketName:${bucketName}, objectName:${_100kbObjectBufferName}, offset:1024`, done => {\n      var hash = crypto.createHash('md5')\n      client.getPartialObject(bucketName, _100kbObjectBufferName, 1024)\n        .then(stream => {\n          stream.on('data', data => hash.update(data))\n          stream.on('end', () => {\n            if (hash.digest('hex') === _100kb1kboffsetmd5) return done()\n            done(new Error('content mismatch'))\n          })\n        })\n        .catch(done)\n    })\n\n    step(`getObject(bucketName, objectName)_bucketName:${bucketName}, objectName:${_100kbObjectBufferName}_`, done => {\n      client.getObject(bucketName, _100kbObjectBufferName)\n        .then(stream => {\n          stream.on('data', function() {})\n          stream.on('end', done)\n        })\n        .catch(done)\n    })\n\n    step(`putObject(bucketName, objectName, stream, cb)_bucketName:${bucketName}, objectName:${_65mbObjectName}_`, done => {\n      var stream = readableStream(_65mb)\n      client.putObject(bucketName, _65mbObjectName, stream, () => {\n        setTimeout(() => {\n          if (Object.values(httpAgent.sockets).length === 0) return done()\n          done(new Error('http request did not release network socket'))\n        }, 0)\n      })\n    })\n\n    step(`getObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_65mbObjectName}_`, done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _65mbObjectName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _65mbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    step(`getObject(bucketName, objectName, cb)_bucketName:${bucketName} non-existent object`, done => {\n      client.getObject(bucketName, 'an-object-that-does-not-exist', (e, stream) => {\n        if (stream) return done(new Error(\"on errors the stream object should not exist\"))\n        if (!e) return done(new Error(\"expected an error object\"))\n        if (e.code !== 'NoSuchKey') return done(new Error(\"expected NoSuchKey error\"))\n        done()\n      })\n    })\n\n    step(`getPartialObject(bucketName, objectName, offset, length, cb)_bucketName:${bucketName}, objectName:${_65mbObjectName}, offset:0, length:100*1024_`, done => {\n      var hash = crypto.createHash('md5')\n      var expectedHash = crypto.createHash('md5').update(_65mb.slice(0,100*1024)).digest('hex')\n      client.getPartialObject(bucketName, _65mbObjectName, 0, 100*1024, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === expectedHash) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, cb)_bucketName:${bucketName}, objectName:${_65mbObjectNameCopy}, srcObject:/${bucketName}/${_65mbObjectName}_`, done => {\n      client.copyObject(bucketName, _65mbObjectNameCopy, \"/\" + bucketName + \"/\" + _65mbObjectName, (e) => {\n        if (e) return done(e)\n        done()\n      })\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject)_bucketName:${bucketName}, objectName:${_65mbObjectNameCopy}, srcObject:/${bucketName}/${_65mbObjectName}_`, done => {\n      client.copyObject(bucketName, _65mbObjectNameCopy, \"/\" + bucketName + \"/\" + _65mbObjectName)\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`statObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_65mbObjectName}_`, done => {\n      client.statObject(bucketName, _65mbObjectName, (e, stat) => {\n        if (e) return done(e)\n        if (stat.size !== _65mb.length) return done(new Error('size mismatch'))\n        done()\n      })\n    })\n\n    step(`statObject(bucketName, objectName)_bucketName:${bucketName}, objectName:${_65mbObjectName}_`, done => {\n      client.statObject(bucketName, _65mbObjectName)\n        .then(stat => {\n          if (stat.size !== _65mb.length)\n            return done(new Error('size mismatch'))\n        })\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`removeObject(bucketName, objectName)_bucketName:${bucketName}, objectName:${_100kbObjectName}_`, done => {\n      client.removeObject(bucketName, _100kbObjectName)\n        .then(function() {\n          async.map([_100kbObjectBufferName, _65mbObjectName, _65mbObjectNameCopy], (objectName, cb) => client.removeObject(bucketName, objectName, cb), done)\n        })\n        .catch(done)\n    })\n\n  })\n\n  describe('tests for copyObject statObject', function() {\n    var etag\n    var modifiedDate\n    step(`putObject(bucketName, objectName, stream, metaData, cb)_bucketName:${bucketName}, objectName:${_100kbObjectName}, stream: 100kb, metaData:${metaData}_`, done => {\n      client.putObject(bucketName, _100kbObjectName, _100kb, metaData, done)\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}, srcObject:/${bucketName}/${_100kbObjectName}_`, done => {\n      client.copyObject(bucketName, _100kbObjectNameCopy, \"/\" + bucketName + \"/\" + _100kbObjectName, (e) => {\n        if (e) return done(e)\n        done()\n      })\n    })\n\n    step(`statObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_100kbObjectName}_`, done => {\n      client.statObject(bucketName, _100kbObjectName, (e, stat) => {\n        if (e) return done(e)\n        if (stat.size !== _100kb.length) return done(new Error('size mismatch'))\n        assert.equal(stat.metaData['content-type'], metaData['Content-Type'])\n        assert.equal(stat.metaData['Testing'], metaData['Testing'])\n        assert.equal(stat.metaData['randomstuff'], metaData['randomstuff'])\n        etag = stat.etag\n        modifiedDate = stat.modifiedDate\n        done()\n      })\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, conditions, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}, srcObject:/${bucketName}/${_100kbObjectName}, conditions:ExceptIncorrectEtag_`, done => {\n      var conds = new minio.CopyConditions()\n      conds.setMatchETagExcept('TestEtag')\n      client.copyObject(bucketName, _100kbObjectNameCopy, \"/\" + bucketName + \"/\" + _100kbObjectName, conds, (e) => {\n        if (e) return done(e)\n        done()\n      })\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, conditions, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}, srcObject:/${bucketName}/${_100kbObjectName}, conditions:ExceptCorrectEtag_`, done => {\n      var conds = new minio.CopyConditions()\n      conds.setMatchETagExcept(etag)\n      client.copyObject(bucketName, _100kbObjectNameCopy, \"/\" + bucketName + \"/\" + _100kbObjectName, conds)\n        .then(() => {\n          done(new Error(\"CopyObject should have failed.\"))\n        })\n        .catch(() => done())\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, conditions, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}, srcObject:/${bucketName}/${_100kbObjectName}, conditions:MatchCorrectEtag_`, done => {\n      var conds = new minio.CopyConditions()\n      conds.setMatchETag(etag)\n      client.copyObject(bucketName, _100kbObjectNameCopy, \"/\" + bucketName + \"/\" + _100kbObjectName, conds, (e) => {\n        if (e) return done(e)\n        done()\n      })\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, conditions, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}, srcObject:/${bucketName}/${_100kbObjectName}, conditions:MatchIncorrectEtag_`, done => {\n      var conds = new minio.CopyConditions()\n      conds.setMatchETag('TestETag')\n      client.copyObject(bucketName, _100kbObjectNameCopy, \"/\" + bucketName + \"/\" + _100kbObjectName, conds)\n        .then(() => {\n          done(new Error(\"CopyObject should have failed.\"))\n        })\n        .catch(() => done())\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, conditions, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}, srcObject:/${bucketName}/${_100kbObjectName}, conditions:Unmodified since ${modifiedDate}`, done => {\n      var conds = new minio.CopyConditions()\n      conds.setUnmodified(new Date(modifiedDate))\n      client.copyObject(bucketName, _100kbObjectNameCopy, \"/\" + bucketName + \"/\" + _100kbObjectName, conds, (e) => {\n        if (e) return done(e)\n        done()\n      })\n    })\n\n    step(`copyObject(bucketName, objectName, srcObject, conditions, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}, srcObject:/${bucketName}/${_100kbObjectName}, conditions:Unmodified since 2010-03-26T12:00:00Z_`, done => {\n      var conds = new minio.CopyConditions()\n      conds.setUnmodified(new Date(\"2010-03-26T12:00:00Z\"))\n      client.copyObject(bucketName, _100kbObjectNameCopy, \"/\" + bucketName + \"/\" + _100kbObjectName, conds)\n        .then(() => {\n          done(new Error(\"CopyObject should have failed.\"))\n        })\n        .catch(() => done())\n    })\n\n    step(`statObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}_`, done => {\n      client.statObject(bucketName, _100kbObjectNameCopy, (e, stat) => {\n        if (e) return done(e)\n        if (stat.size !== _100kb.length) return done(new Error('size mismatch'))\n        done()\n      })\n    })\n\n    step(`removeObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_100kbObjectNameCopy}_`, done => {\n      async.map([_100kbObjectName, _100kbObjectNameCopy], (objectName, cb) => client.removeObject(bucketName, objectName, cb), done)\n    })\n\n  })\n\n  describe('listIncompleteUploads removeIncompleteUpload', () => {\n    step(`initiateNewMultipartUpload(bucketName, objectName, metaData, cb)_bucketName:${bucketName}, objectName:${_65mbObjectName}, metaData:${metaData}`, done => {\n      client.initiateNewMultipartUpload(bucketName, _65mbObjectName, metaData, done)\n    })\n    step(`listIncompleteUploads(bucketName, prefix, recursive)_bucketName:${bucketName}, prefix:${_65mbObjectName}, recursive: true_`, function(done) {\n      // MinIO's ListIncompleteUploads returns an empty list, so skip this on non-AWS.\n      // See: https://github.com/minio/minio/commit/75c43bfb6c4a2ace\n      if (!client.host.includes('s3.amazonaws.com')) {\n        this.skip()\n      }\n\n      var found = false\n      client.listIncompleteUploads(bucketName, _65mbObjectName, true)\n        .on('error', e => done(e))\n        .on('data', data => {\n          if (data.key === _65mbObjectName) found = true\n        })\n        .on('end', () => {\n          if (found) return done()\n          done(new Error(`${_65mbObjectName} not found during listIncompleteUploads`))\n        })\n    })\n    step(`listIncompleteUploads(bucketName, prefix, recursive)_bucketName:${bucketName}, recursive: true_`, function(done) {\n      // MinIO's ListIncompleteUploads returns an empty list, so skip this on non-AWS.\n      // See: https://github.com/minio/minio/commit/75c43bfb6c4a2ace\n      if (!client.host.includes('s3.amazonaws.com')) {\n        this.skip()\n      }\n\n      var found = false\n      client.listIncompleteUploads(bucketName, \"\", true)\n        .on('error', e => done(e))\n        .on('data', data => {\n          if (data.key === _65mbObjectName) found = true\n        })\n        .on('end', () => {\n          if (found) return done()\n          done(new Error(`${_65mbObjectName} not found during listIncompleteUploads`))\n        })\n    })\n    step(`removeIncompleteUploads(bucketName, prefix)_bucketName:${bucketName}, prefix:${_65mbObjectName}_`, done => {\n      client.removeIncompleteUpload(bucketName, _65mbObjectName)\n        .then(done)\n        .catch(done)\n    })\n  })\n\n  describe('fPutObject fGetObject', function() {\n    var tmpFileUpload = `${tmpDir}/${_65mbObjectName}`\n    var tmpFileDownload = `${tmpDir}/${_65mbObjectName}.download`\n\n    step(`fPutObject(bucketName, objectName, filePath, callback)_bucketName:${bucketName}, objectName:${_65mbObjectName}, filePath:${tmpFileUpload}_`, done => {\n      fs.writeFileSync(tmpFileUpload, _65mb)\n      client.fPutObject(bucketName, _65mbObjectName, tmpFileUpload, () => {\n        setTimeout(() => {\n          if (Object.values(httpAgent.sockets).length === 0) return done()\n          done(new Error('http request did not release network socket'))\n        }, 0)\n      })\n    })\n\n    step(`fPutObject(bucketName, objectName, filePath, metaData, callback)_bucketName:${bucketName}, objectName:${_65mbObjectName}, filePath:${tmpFileUpload}, metaData: ${metaData}_`, done => client.fPutObject(bucketName, _65mbObjectName, tmpFileUpload, metaData, done))\n    step(`fGetObject(bucketName, objectName, filePath, callback)_bucketName:${bucketName}, objectName:${_65mbObjectName}, filePath:${tmpFileDownload}_`, done => {\n      client.fGetObject(bucketName, _65mbObjectName, tmpFileDownload)\n        .then(() => {\n          var md5sum = crypto.createHash('md5').update(fs.readFileSync(tmpFileDownload)).digest('hex')\n          if (md5sum === _65mbmd5) return done()\n          return done(new Error('md5sum mismatch'))\n        })\n        .catch(done)\n    })\n\n    step(`removeObject(bucketName, objectName, filePath, callback)_bucketName:${bucketName}, objectName:${_65mbObjectName}_`, done => {\n      fs.unlinkSync(tmpFileDownload)\n      client.removeObject(bucketName, _65mbObjectName)\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`fPutObject(bucketName, objectName, filePath, metaData)_bucketName:${bucketName}, objectName:${_65mbObjectName}, filePath:${tmpFileUpload}_`, done => {\n      client.fPutObject(bucketName, _65mbObjectName, tmpFileUpload)\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`fGetObject(bucketName, objectName, filePath)_bucketName:${bucketName}, objectName:${_65mbObjectName}, filePath:${tmpFileDownload}_`, done => {\n      client.fGetObject(bucketName, _65mbObjectName, tmpFileDownload)\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`removeObject(bucketName, objectName, filePath, callback)_bucketName:${bucketName}, objectName:${_65mbObjectName}_`, (done) => {\n      fs.unlinkSync(tmpFileUpload)\n      fs.unlinkSync(tmpFileDownload)\n      client.removeObject(bucketName, _65mbObjectName, done)\n    })\n  })\n  describe('fGetObject-resume', () => {\n    var localFile = `${tmpDir}/${_5mbObjectName}`\n    var etag = ''\n    step(`putObject(bucketName, objectName, stream, metaData, cb)_bucketName:${bucketName}, objectName:${_5mbObjectName}, stream:5mb_`, done => {\n      var stream = readableStream(_5mb)\n      client.putObject(bucketName, _5mbObjectName, stream, _5mb.length, {})\n        .then((resp) => {\n          etag = resp\n          done()\n        })\n        .catch(done)\n    })\n    step(`fGetObject(bucketName, objectName, filePath, callback)_bucketName:${bucketName}, objectName:${_5mbObjectName}, filePath:${localFile}`, done => {\n      var bufPart = Buffer.alloc(_100kb.length)\n      _5mb.copy(bufPart, 0, 0, _100kb.length)\n      var tmpFile = `${tmpDir}/${_5mbObjectName}.${etag}.part.minio`\n      // create a partial file\n      fs.writeFileSync(tmpFile, bufPart)\n      client.fGetObject(bucketName, _5mbObjectName, localFile)\n        .then(() => {\n          var md5sum = crypto.createHash('md5').update(fs.readFileSync(localFile)).digest('hex')\n          if (md5sum === _5mbmd5) return done()\n          return done(new Error('md5sum mismatch'))\n        })\n        .catch(done)\n    })\n    step(`removeObject(bucketName, objectName, callback)_bucketName:${bucketName}, objectName:${_5mbObjectName}_`, done => {\n      fs.unlinkSync(localFile)\n      client.removeObject(bucketName, _5mbObjectName, done)\n    })\n  })\n\n  describe('bucket policy', () => {\n    let policy = `{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetBucketLocation\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"*\"]},\"Resource\":[\"arn:aws:s3:::${bucketName}\"],\"Sid\":\"\"},{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"*\"]},\"Resource\":[\"arn:aws:s3:::${bucketName}/*\"],\"Sid\":\"\"}]}`\n\n    step(`setBucketPolicy(bucketName, bucketPolicy, cb)_bucketName:${bucketName}, bucketPolicy:${policy}_`, done => {\n      client.setBucketPolicy(bucketName, policy, err => {\n        if (err && err.code == 'NotImplemented') return done()\n        if (err) return done(err)\n        done()\n      })\n    })\n\n    step(`getBucketPolicy(bucketName, cb)_bucketName:${bucketName}_`, done => {\n      client.getBucketPolicy(bucketName, (err, response) => {\n        if (err && err.code == 'NotImplemented') return done()\n        if (err) return done(err)\n        if (!response) {\n          return done(new Error(`policy is empty`))\n        }\n        done()\n      })\n    })\n  })\n\n  describe('presigned operations', () => {\n    step(`presignedPutObject(bucketName, objectName, expires, cb)_bucketName:${bucketName}, objectName:${_1byteObjectName}, expires: 1000_`, done => {\n      client.presignedPutObject(bucketName, _1byteObjectName, 1000, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'PUT'\n        options.headers = {\n          'content-length': _1byte.length\n        }\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          response.on('error', e => done(e))\n          response.on('end', () => done())\n          response.on('data', () => {})\n        })\n        request.on('error', e => done(e))\n        request.write(_1byte)\n        request.end()\n      })\n    })\n\n    step(`presignedPutObject(bucketName, objectName, expires)_bucketName:${bucketName}, objectName:${_1byteObjectName}, expires:-123_`, done => {\n      // negative values should trigger an error\n      client.presignedPutObject(bucketName, _1byteObjectName, -123)\n        .then(() => {\n          done(new Error('negative values should trigger an error'))\n        })\n        .catch(() => done())\n    })\n\n    step(`presignedPutObject(bucketName, objectName)_bucketName:${bucketName}, objectName:${_1byteObjectName}_`, done => {\n      // Putting the same object should not cause any error\n      client.presignedPutObject(bucketName, _1byteObjectName)\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`presignedGetObject(bucketName, objectName, expires, cb)_bucketName:${bucketName}, objectName:${_1byteObjectName}, expires:1000_`, done => {\n      client.presignedGetObject(bucketName, _1byteObjectName, 1000, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          var error = null\n          response.on('error', e => done(e))\n          response.on('end', () => done(error))\n          response.on('data', (data) => {\n            if (data.toString() !== _1byte.toString()) {\n              error = new Error('content mismatch')\n            }\n          })\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    step(`presignedUrl(httpMethod, bucketName, objectName, expires, cb)_httpMethod:GET, bucketName:${bucketName}, objectName:${_1byteObjectName}, expires:1000_`, done => {\n      client.presignedUrl('GET', bucketName, _1byteObjectName, 1000, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          var error = null\n          response.on('error', e => done(e))\n          response.on('end', () => done(error))\n          response.on('data', (data) => {\n            if (data.toString() !== _1byte.toString()) {\n              error = new Error('content mismatch')\n            }\n          })\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    step(`presignedUrl(httpMethod, bucketName, objectName, expires, cb)_httpMethod:GET, bucketName:${bucketName}, objectName:${_1byteObjectName}, expires:86400, requestDate:StartOfDay_`, done => {\n      var requestDate = new Date()\n      requestDate.setHours(0,0,0,0)\n      client.presignedUrl('GET', bucketName, _1byteObjectName, 86400, requestDate, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          var error = null\n          response.on('error', e => done(e))\n          response.on('end', () => done(error))\n          response.on('data', (data) => {\n            if (data.toString() !== _1byte.toString()) {\n              error = new Error('content mismatch')\n            }\n          })\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    step(`presignedGetObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_1byteObjectName}_`, done => {\n      client.presignedGetObject(bucketName, _1byteObjectName, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          var error = null\n          response.on('error', e => done(e))\n          response.on('end', () => done(error))\n          response.on('data', (data) => {\n            if (data.toString() !== _1byte.toString()) {\n              error = new Error('content mismatch')\n            }\n          })\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    step(`presignedGetObject(bucketName, objectName, expires)_bucketName:${bucketName}, objectName:this.does.not.exist, expires:2938_`, done => {\n      client.presignedGetObject(bucketName, 'this.does.not.exist', 2938)\n        .then(assert.fail)\n        .catch(() => done())\n    })\n\n    step(`presignedGetObject(bucketName, objectName, expires, respHeaders, cb)_bucketName:${bucketName}, objectName:${_1byteObjectName}, expires:1000_`, done => {\n      var respHeaders = {\n        'response-content-type': 'text/html',\n        'response-content-language': 'en',\n        'response-expires': 'Sun, 07 Jun 2020 16:07:58 GMT',\n        'response-cache-control': 'No-cache',\n        'response-content-disposition': 'attachment; filename=testing.txt',\n        'response-content-encoding': 'gzip'\n      }\n      client.presignedGetObject(bucketName, _1byteObjectName, 1000, respHeaders, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on get : ${response.statusCode}`))\n          if (respHeaders['response-content-type'] != response.headers['content-type']) {\n            return done(new Error(`content-type header mismatch`))\n          }\n          if (respHeaders['response-content-language'] != response.headers['content-language']) {\n            return done(new Error(`content-language header mismatch`))\n          }\n          if (respHeaders['response-expires'] != response.headers['expires']) {\n            return done(new Error(`expires header mismatch`))\n          }\n          if (respHeaders['response-cache-control'] != response.headers['cache-control']) {\n            return done(new Error(`cache-control header mismatch`))\n          }\n          if (respHeaders['response-content-disposition'] != response.headers['content-disposition']) {\n            return done(new Error(`content-disposition header mismatch`))\n          }\n          if (respHeaders['response-content-encoding'] != response.headers['content-encoding']) {\n            return done(new Error(`content-encoding header mismatch`))\n          }\n          response.on('data', () => {})\n          done()\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    step(`presignedGetObject(bucketName, objectName, cb)_bucketName:${bucketName}, objectName:${_1byteObjectName}, expires:86400, requestDate:StartOfDay_`, done => {\n      var requestDate = new Date()\n      requestDate.setHours(0,0,0,0)\n      client.presignedGetObject(bucketName, _1byteObjectName, 86400, {}, requestDate, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          var error = null\n          response.on('error', e => done(e))\n          response.on('end', () => done(error))\n          response.on('data', (data) => {\n            if (data.toString() !== _1byte.toString()) {\n              error = new Error('content mismatch')\n            }\n          })\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    step('presignedPostPolicy(postPolicy, cb)_postPolicy:expiresin10days_', done => {\n      var policy = client.newPostPolicy()\n      policy.setKey(_1byteObjectName)\n      policy.setBucket(bucketName)\n      var expires = new Date\n      expires.setSeconds(24 * 60 * 60 * 10)\n      policy.setExpires(expires)\n\n      client.presignedPostPolicy(policy, (e, data) => {\n        if (e) return done(e)\n        var req = superagent.post(data.postURL)\n        _.each(data.formData, (value, key) => req.field(key, value))\n        req.attach('file', Buffer.from([_1byte]), 'test')\n        req.end(function(e) {\n          if (e) return done(e)\n          done()\n        })\n        req.on('error', e => done(e))\n      })\n    })\n\n    step('presignedPostPolicy(postPolicy)_postPolicy: null_', done => {\n      client.presignedPostPolicy(null)\n        .then(() => {\n          done(new Error('null policy should fail'))\n        })\n        .catch(() => done())\n    })\n\n    step(`presignedUrl(httpMethod, bucketName, objectName, expires, reqParams, cb)_httpMethod:GET, bucketName:${bucketName}, expires:1000_`, done => {\n      client.presignedUrl('GET', bucketName, '', 1000, {'prefix': 'data', 'max-keys': 1000}, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'GET'\n        options.headers = {\n        }\n        var str = ''\n        if (options.protocol === 'https:') transport = https\n        var callback = function (response) {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          response.on('error', e => done(e))\n          response.on('end', function () {\n            if (!str.match(`<Key>${_1byteObjectName}</Key>`)) {\n              return done(new Error('Listed object does not match the object in the bucket!'))\n            }\n            done()\n          })\n          response.on('data', function (chunk) {\n            str += chunk\n          })\n        }\n        var request = transport.request(options, callback)\n        request.end()\n      })\n    })\n\n    step(`presignedUrl(httpMethod, bucketName, objectName, expires, cb)_httpMethod:DELETE, bucketName:${bucketName}, objectName:${_1byteObjectName}, expires:1000_`, done => {\n      client.presignedUrl('DELETE', bucketName, _1byteObjectName, 1000, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        options.method = 'DELETE'\n        options.headers = {\n        }\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 204) return done(new Error(`error on put : ${response.statusCode}`))\n          response.on('error', e => done(e))\n          response.on('end', () => done())\n          response.on('data', () => {})\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n  })\n\n  describe('listObjects', function() {\n    var listObjectPrefix = 'miniojsPrefix'\n    var listObjectsNum = 10\n    var objArray = []\n    var listArray = []\n    var listPrefixArray = []\n\n    step(`putObject(bucketName, objectName, stream, size, metaData, callback)_bucketName:${bucketName}, stream:1b, size:1_Create ${listObjectsNum} objects`, done => {\n      _.times(listObjectsNum, i => objArray.push(`${listObjectPrefix}.${i}`))\n      objArray = objArray.sort()\n      async.mapLimit(\n        objArray,\n        20,\n        (objectName, cb) => client.putObject(bucketName, objectName, readableStream(_1byte), _1byte.length, {}, cb),\n        done\n      )\n    })\n\n    step(`listObjects(bucketName, prefix, recursive)_bucketName:${bucketName}, prefix: miniojsprefix, recursive:true_`, done => {\n      client.listObjects(bucketName, listObjectPrefix, true)\n        .on('error', done)\n        .on('end', () => {\n          if (_.isEqual(objArray, listPrefixArray)) return done()\n          return done(new Error(`listObjects lists ${listPrefixArray.length} objects, expected ${listObjectsNum}`))\n        })\n        .on('data', data => {\n          listPrefixArray.push(data.name)\n        })\n    })\n\n    step('listObjects(bucketName, prefix, recursive)_recursive:true_', done => {\n      try {\n        client.listObjects(\"\", \"\", true)\n          .on('end', () => {\n            return done(new Error(`listObjects should throw exception when empty bucketname is passed`))\n          })\n      } catch (e) {\n        if (e.name == 'InvalidBucketNameError') {\n          done()\n        } else {\n          done(e)\n        }\n      }\n    })\n\n    step(`listObjects(bucketName, prefix, recursive)_bucketName:${bucketName}, recursive:false_`, done => {\n      listArray = []\n      client.listObjects(bucketName, '', false)\n        .on('error', done)\n        .on('end', () => {\n          if (_.isEqual(objArray, listArray)) return done()\n          return done(new Error(`listObjects lists ${listArray.length} objects, expected ${listObjectsNum}`))\n        })\n        .on('data', data => {\n          listArray.push(data.name)\n        })\n    })\n\n    step(`listObjectsV2(bucketName, prefix, recursive, startAfter)_bucketName:${bucketName}, recursive:true_`, done => {\n      listArray = []\n      client.listObjectsV2(bucketName, '', true,'')\n        .on('error', done)\n        .on('end', () => {\n          if (_.isEqual(objArray, listArray)) return done()\n          return done(new Error(`listObjects lists ${listArray.length} objects, expected ${listObjectsNum}`))\n        })\n        .on('data', data => {\n          listArray.push(data.name)\n        })\n    })\n\n    step(`listObjectsV2WithMetadata(bucketName, prefix, recursive, startAfter)_bucketName:${bucketName}, recursive:true_`, done => {\n      listArray = []\n      client.extensions.listObjectsV2WithMetadata(bucketName, '', true,'')\n        .on('error', done)\n        .on('end', () => {\n          if (_.isEqual(objArray, listArray)) return done()\n          return done(new Error(`listObjects lists ${listArray.length} objects, expected ${listObjectsNum}`))\n        })\n        .on('data', data => {\n          listArray.push(data.name)\n        })\n    })\n\n    step(`removeObject(bucketName, objectName, callback)_bucketName:${bucketName}_Remove ${listObjectsNum} objects`, done => {\n      async.mapLimit(\n        listArray,\n        20,\n        (objectName, cb) => client.removeObject(bucketName, objectName, cb),\n        done\n      )\n    })\n  })\n\n  describe('removeObjects', function() {\n    var listObjectPrefix = 'miniojsPrefix'\n    var listObjectsNum = 10\n    var objArray = []\n    var objectsList = []\n\n    step(`putObject(bucketName, objectName, stream, size, contentType, callback)_bucketName:${bucketName}, stream:1b, size:1_Create ${listObjectsNum} objects`, done => {\n      _.times(listObjectsNum, i => objArray.push(`${listObjectPrefix}.${i}`))\n      objArray = objArray.sort()\n      async.mapLimit(\n        objArray,\n        20,\n        (objectName, cb) => client.putObject(bucketName, objectName, readableStream(_1byte), _1byte.length, '', cb),\n        done\n      )\n    })\n\n    step(`listObjects(bucketName, prefix, recursive)_bucketName:${bucketName}, recursive:false_`, done => {\n      client.listObjects(bucketName, listObjectPrefix, false)\n        .on('error', done)\n        .on('end', () => {\n          try {\n            client.removeObjects(bucketName, '',function(e) {\n              if (e) {\n                done()\n              }\n            })\n          } catch (e) {\n            if (e.name === \"InvalidArgumentError\") {\n              done()\n            }\n          }\n        })\n        .on('data', data => {\n          objectsList.push(data.name)\n        })\n    })\n\n    objectsList = []\n\n    step(`listObjects(bucketName, prefix, recursive)_bucketName:${bucketName}, recursive:false_`, done => {\n      client.listObjects(bucketName, listObjectPrefix, false)\n        .on('error', done)\n        .on('end', () => {\n          client.removeObjects(bucketName, objectsList,function(e) {\n            if (e) {\n              done(e)\n            }\n            done()\n          })\n        })\n        .on('data', data => {\n          objectsList.push(data.name)\n        })\n    })\n\n    // Non latin characters\n    step(`putObject(bucketName, objectName, stream)_bucketName:${bucketName}, objectName:file, stream:1b`, done => {\n      client.putObject(bucketName, 'file', _1byte)\n        .then(() => done())\n        .catch(done)\n    })\n\n    step(`removeObjects with non latin charactes`, done => {\n      client.removeObjects(bucketName, ['file'])\n        .then(() => done())\n        .catch(done)\n    })\n\n  })\n\n\n  describe('bucket notifications', () => {\n    describe('#listenBucketNotification', () => {\n      before(function() {\n        // listenBucketNotification only works on MinIO, so skip if\n        // the host is Amazon.\n        if (client.host.includes('s3.amazonaws.com')) {\n          this.skip()\n        }\n      })\n\n      step(`listenBucketNotification(bucketName, prefix, suffix, events)_bucketName:${bucketName}, prefix:photos/, suffix:.jpg, events:bad_`, done => {\n        let poller = client.listenBucketNotification(bucketName, 'photos/', '.jpg', ['bad'])\n        poller.on('error', error => {\n          if (error.code != 'NotImplemented') {\n            assert.match(error.message, /A specified event is not supported for notifications./)\n            assert.equal(error.code, 'InvalidArgument')\n          }\n          done()\n        })\n      })\n      step(`listenBucketNotification(bucketName, prefix, suffix, events)_bucketName:${bucketName}, events: s3:ObjectCreated:*_`, done => {\n        let poller = client.listenBucketNotification(bucketName, '', '', ['s3:ObjectCreated:*'])\n        let records = 0\n        let pollerError = null\n        poller.on('notification', record => {\n          records++\n\n          assert.equal(record.eventName, 's3:ObjectCreated:Put')\n          assert.equal(record.s3.bucket.name, bucketName)\n          assert.equal(record.s3.object.key, objectName)\n        })\n        poller.on('error', error => {\n          pollerError = error\n        })\n        setTimeout(() => { // Give it some time for the notification to be setup.\n          if (pollerError) {\n            if (pollerError.code != 'NotImplemented') {\n              done(pollerError)\n            } else {\n              done()\n            }\n            return\n          }\n          client.putObject(bucketName, objectName, 'stringdata', (err) => {\n            if (err) return done(err)\n            setTimeout(() => { // Give it some time to get the notification.\n              poller.stop()\n              client.removeObject(bucketName, objectName, err => {\n                if (err) return done(err)\n                if (!records) return done(new Error('notification not received'))\n                done()\n              })\n            }, 10 * 1000)\n          })\n        }, 10*1000)\n      })\n\n      // This test is very similar to that above, except it does not include\n      // Minio.ObjectCreatedAll in the config. Thus, no events should be emitted.\n      step(`listenBucketNotification(bucketName, prefix, suffix, events)_bucketName:${bucketName}, events:s3:ObjectRemoved:*`, done => {\n        let poller = client.listenBucketNotification(bucketName, '', '', ['s3:ObjectRemoved:*'])\n        poller.on('notification', assert.fail)\n        poller.on('error', error => {\n          if (error.code != 'NotImplemented') {\n            done(error)\n          }\n        })\n\n        client.putObject(bucketName, objectName, 'stringdata', (err) => {\n          if (err) return done(err)\n          // It polls every five seconds, so wait for two-ish polls, then end.\n          setTimeout(() => {\n            poller.stop()\n            poller.removeAllListeners('notification')\n            // clean up object now\n            client.removeObject(bucketName, objectName, done)\n          }, 11 * 1000)\n        })\n      })\n    })\n  })\n\n  describe('Bucket Versioning API', ()=>{\n    //Isolate the bucket/object for easy debugging and tracking.\n    const  versionedBucketName = \"minio-js-test-version-\" + uuid.v4()\n    before((done) => client.makeBucket(versionedBucketName, '', done))\n    after((done) => client.removeBucket(versionedBucketName, done))\n\n    describe('Versioning Steps test', function () {\n      step(\"Check if versioning is enabled on a bucket\", done => {\n        client.getBucketVersioning(versionedBucketName, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n      step(\"Enable versioning  on a bucket\", done => {\n        client.setBucketVersioning(versionedBucketName, {Status: \"Enabled\"}, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(\"Suspend versioning  on a bucket\", done => {\n        client.setBucketVersioning(versionedBucketName, {Status: \"Suspended\"}, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(\"Check if versioning is Suspended on a bucket\", done => {\n        client.getBucketVersioning(versionedBucketName, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n    })\n\n  })\n\n  describe('Versioning tests on a buckets', function () {\n    //Isolate the bucket/object for easy debugging and tracking.\n    const  versionedBucketName = \"minio-js-test-version-\" + uuid.v4()\n    const versioned_100kbObjectName = 'datafile-versioned-100-kB'\n    const versioned_100kb_Object = dataDir ? fs.readFileSync(dataDir + '/' + versioned_100kbObjectName) : Buffer.alloc(100 * 1024, 0)\n\n    before((done) => client.makeBucket(versionedBucketName, '', done))\n    after((done) => client.removeBucket(versionedBucketName, done))\n\n    describe('Versioning Steps test', function () {\n      let versionId\n\n      step(`setBucketVersioning(bucketName, versionConfig):_bucketName:${versionedBucketName},versionConfig:{Status:\"Enabled\"} `,(done)=>{\n        client.setBucketVersioning(versionedBucketName,{Status:\"Enabled\"},(err)=>{\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(`putObject(bucketName, objectName, stream)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}, stream:100Kib_`, done => {\n        client.putObject(versionedBucketName, versioned_100kbObjectName, versioned_100kb_Object)\n          .then(() => done())\n          .catch(done)\n      })\n\n      step(`statObject(bucketName, objectName, statOpts)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}`, done => {\n        client.statObject(versionedBucketName, versioned_100kbObjectName, {}, (e, res)=>{\n          versionId = res.versionId\n          done()\n        })\n      })\n\n      step(`removeObject(bucketName, objectName, removeOpts)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}`, done => {\n        client.removeObject(versionedBucketName, versioned_100kbObjectName, {versionId:versionId}, ()=>{\n          done()\n        })\n      })\n\n      step(`setBucketVersioning(bucketName, versionConfig):_bucketName:${versionedBucketName},versionConfig:{Status:\"Suspended\"}`, (done)=>{\n        client.setBucketVersioning(versionedBucketName,{Status:\"Suspended\"},(err)=>{\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n    })\n  })\n\n  describe('Versioning tests on a buckets: getObject, fGetObject, getPartialObject, putObject, removeObject with versionId support', function () {\n    //Isolate the bucket/object for easy debugging and tracking.\n    const  versionedBucketName = \"minio-js-test-version-\" + uuid.v4()\n    const versioned_100kbObjectName = 'datafile-versioned-100-kB'\n    const versioned_100kb_Object = dataDir ? fs.readFileSync(dataDir + '/' + versioned_100kbObjectName) : Buffer.alloc(100 * 1024, 0)\n\n    before((done) => client.makeBucket(versionedBucketName, '', done))\n    after((done) => client.removeBucket(versionedBucketName, done))\n\n    describe('Versioning Test for  getObject, getPartialObject, putObject, removeObject with versionId support', function () {\n      let versionId=null\n      step(`Enable Versioning on Bucket: setBucketVersioning(bucketName,versioningConfig)_bucketName:${versionedBucketName},{Status:\"Enabled\"}`,(done)=>{\n        client.setBucketVersioning(versionedBucketName,{Status:\"Enabled\"},(err)=>{\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(`putObject(bucketName, objectName, stream)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}, stream:100Kib_`, done => {\n        client.putObject(versionedBucketName, versioned_100kbObjectName, versioned_100kb_Object)\n          .then((res={}) => {\n            if(res.versionId){\n              versionId = res.versionId // In gateway mode versionId will not be returned.\n            }\n            done()\n          })\n          .catch(done)\n      })\n\n      step(`getObject(bucketName, objectName, getOpts)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}`, done => {\n        if(versionId) {\n          client.getObject(versionedBucketName, versioned_100kbObjectName, {versionId: versionId}, function (e, dataStream) {\n            const objVersion = getVersionId(dataStream.headers)\n            if (objVersion) {\n              done()\n            } else {\n              done(new Error('versionId not found in getObject response'))\n            }\n          })\n        }else{\n          done()\n        }\n      })\n\n\n      step(`fGetObject(bucketName, objectName, filePath, getOpts={})_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}`, done => {\n        if(versionId) {\n          var tmpFileDownload = `${tmpDir}/${versioned_100kbObjectName}.download`\n          client.fGetObject(versionedBucketName, versioned_100kbObjectName, tmpFileDownload, {versionId: versionId}, function () {\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n\n\n      step(`getPartialObject(bucketName, objectName, offset, length, getOpts)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}`, done => {\n        if(versionId) {\n          client.getPartialObject(versionedBucketName, versioned_100kbObjectName, 10, 30, {versionId: versionId}, function (e, dataStream) {\n            const objVersion = getVersionId(dataStream.headers)\n            if (objVersion) {\n              done()\n            } else {\n              done(new Error('versionId not found in getPartialObject response'))\n            }\n          })\n        }else{\n          done()\n        }\n      })\n\n      step(`removeObject(bucketName, objectName, removeOpts)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName},removeOpts:{versionId:${versionId}`, done => {\n        if(versionId) {\n          client.removeObject(versionedBucketName, versioned_100kbObjectName, {versionId: versionId}, () => {\n            done()\n          })\n        }else{\n          //In gateway mode, use regular delete to remove an object so that the bucket can be cleaned up.\n          client.removeObject(versionedBucketName, versioned_100kbObjectName, () => {\n            done()\n          })\n        }\n      })\n\n      step(`setBucketVersioning(bucketName, versionConfig):_bucketName:${versionedBucketName},versionConfig:{Status:\"Suspended\"}`, (done)=>{\n        client.setBucketVersioning(versionedBucketName,{Status:\"Suspended\"},(err)=>{\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n    })\n  })\n\n  describe('Versioning Supported listObjects', function() {\n    const  versionedBucketName = \"minio-js-test-version-list\" + uuid.v4()\n    const prefixName  = \"Prefix1\"\n    const versionedObjectName =\"datafile-versioned-list-100-kB\"\n    const objVersionIdCounter = [1,2,3,4,5]// This should track adding 5 versions of the same object.\n    let listObjectsNum = objVersionIdCounter.length\n    let objArray = []\n    let listPrefixArray = []\n    let isVersioningSupported=false\n\n    const objNameWithPrefix = `${prefixName}/${versionedObjectName}`\n\n    before((done) => client.makeBucket(versionedBucketName, '', ()=>{\n      client.setBucketVersioning(versionedBucketName,{Status:\"Enabled\"},(err)=>{\n        if (err && err.code === 'NotImplemented') return done()\n        if (err) return done(err)\n        isVersioningSupported = true\n        done()\n      })\n\n    }))\n    after((done) => client.removeBucket(versionedBucketName, done))\n\n\n    step(`putObject(bucketName, objectName, stream, size, metaData, callback)_bucketName:${versionedBucketName}, stream:1b, size:1_Create ${listObjectsNum} objects`, done => {\n      if(isVersioningSupported) {\n        let count=1\n        objVersionIdCounter.forEach(()=>{\n          client.putObject(versionedBucketName, objNameWithPrefix, readableStream(_1byte), _1byte.length, {}, (e,data)=>{\n            objArray.push(data)\n            if(count === objVersionIdCounter.length) {\n              done()\n            }\n            count +=1\n          })\n        })\n      }else {\n        done()\n      }\n    })\n\n    step(`listObjects(bucketName, prefix, recursive)_bucketName:${versionedBucketName}, prefix: '', recursive:true_`, done => {\n      if(isVersioningSupported) {\n        client.listObjects(versionedBucketName, '', true, {IncludeVersion: true})\n          .on('error', done)\n          .on('end', () => {\n            if (_.isEqual(objArray.length, listPrefixArray.length)) return done()\n            return done(new Error(`listObjects lists ${listPrefixArray.length} objects, expected ${listObjectsNum}`))\n          })\n          .on('data', data => {\n            listPrefixArray.push(data)\n          })\n      } else {\n        done()\n      }\n    })\n\n    step(`listObjects(bucketName, prefix, recursive)_bucketName:${versionedBucketName}, prefix: ${prefixName}, recursive:true_`, done => {\n      if(isVersioningSupported) {\n        listPrefixArray=[]\n        client.listObjects(versionedBucketName, prefixName, true, {IncludeVersion: true})\n          .on('error', done)\n          .on('end', () => {\n            if (_.isEqual(objArray.length, listPrefixArray.length)) return done()\n            return done(new Error(`listObjects lists ${listPrefixArray.length} objects, expected ${listObjectsNum}`))\n          })\n          .on('data', data => {\n            listPrefixArray.push(data)\n          })\n      } else {\n        done()\n      }\n    })\n\n\n    step(`removeObject(bucketName, objectName, removeOpts)_bucketName:${versionedBucketName}_Remove ${listObjectsNum} objects`, done => {\n      if(isVersioningSupported) {\n        let count=1\n        listPrefixArray.forEach((item)=>{\n          client.removeObject(versionedBucketName ,item.name, {versionId: item.versionId}, ()=>{\n            if (count === listPrefixArray.length) {\n              done()\n            }\n            count +=1\n          })\n        })\n      }else {\n        done()\n      }\n    })\n  })\n\n  describe('Versioning tests on a bucket for Deletion of Multiple versions', function () {\n    //Isolate the bucket/object for easy debugging and tracking.\n    const  versionedBucketName = \"minio-js-test-version-\" + uuid.v4()\n    const versioned_100kbObjectName = 'datafile-versioned-100-kB'\n    const versioned_100kb_Object = dataDir ? fs.readFileSync(dataDir + '/' + versioned_100kbObjectName) : Buffer.alloc(100 * 1024, 0)\n\n    before((done) => client.makeBucket(versionedBucketName, '', done))\n    after((done) => client.removeBucket(versionedBucketName, done))\n\n\n    describe('Test for removal of multiple versions', function () {\n      let isVersioningSupported=false\n      const objVersionList=[]\n      step(`setBucketVersioning(bucketName, versionConfig):_bucketName:${versionedBucketName},versionConfig:{Status:\"Enabled\"} `,(done)=>{\n        client.setBucketVersioning(versionedBucketName,{Status:\"Enabled\"},(err)=>{\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          isVersioningSupported=true\n          done()\n        })\n      })\n\n      step(`putObject(bucketName, objectName, stream)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}, stream:100Kib_`, done => {\n        if(isVersioningSupported) {\n          client.putObject(versionedBucketName, versioned_100kbObjectName, versioned_100kb_Object)\n            .then(() => done())\n            .catch(done)\n        }else{\n          done()\n        }\n\n      })\n      //Put two versions of the same object.\n      step(`putObject(bucketName, objectName, stream)_bucketName:${versionedBucketName}, objectName:${versioned_100kbObjectName}, stream:100Kib_`, done => {\n        //Put two versions of the same object.\n        if(isVersioningSupported) {\n          client.putObject(versionedBucketName, versioned_100kbObjectName, versioned_100kb_Object)\n            .then(() => done())\n            .catch(done)\n        }else{\n          done()\n        }\n      })\n\n      step(`listObjects(bucketName, prefix, recursive)_bucketName:${versionedBucketName}, prefix: '', recursive:true_`, done => {\n        if(isVersioningSupported) {\n          client.listObjects(versionedBucketName, '', true, {IncludeVersion: true})\n            .on('error', done)\n            .on('end', () => {\n              if (_.isEqual(2, objVersionList.length)) return done()\n              return done(new Error(`listObjects lists ${objVersionList.length} objects, expected ${2}`))\n            })\n            .on('data', data => {\n              //Pass list object response as is to remove objects\n              objVersionList.push(data)\n            })\n        } else {\n          done()\n        }\n      })\n\n      step(`removeObjects(bucketName, objectList, removeOpts)_bucketName:${versionedBucketName}_Remove ${objVersionList.length} objects`, done => {\n        if(isVersioningSupported) {\n          let count=1\n          objVersionList.forEach(()=>{\n            //remove multiple versions of the object.\n            client.removeObjects(versionedBucketName, objVersionList, ()=>{\n              if (count === objVersionList.length) {\n                done()\n              }\n              count +=1\n            })\n          })\n        }else {\n          done()\n        }\n      })\n\n    })\n  })\n\n  describe('Bucket Tags API', ()=>{\n    //Isolate the bucket/object for easy debugging and tracking.\n    const  tagsBucketName = \"minio-js-test-tags-\" + uuid.v4()\n    before((done) => client.makeBucket(tagsBucketName, '', done))\n    after((done) => client.removeBucket(tagsBucketName, done))\n\n    describe('set, get and remove Tags on a bucket', function () {\n      step(`Set tags on a bucket_bucketName:${tagsBucketName}`, done => {\n        client.setBucketTagging(tagsBucketName, {'test-tag-key':'test-tag-value'}, (err) => {\n          if (err) return done(err)\n          done()\n        })\n      })\n      step(`Get tags on a bucket_bucketName:${tagsBucketName}`, done => {\n        client.getBucketTagging(tagsBucketName, (err, tagList) => {\n          if (err) return done(err)\n          if(isArray(tagList)) {\n            done()\n          }\n        })\n      })\n\n      step(`remove Tags on a bucket_bucketName:${tagsBucketName}`, done => {\n        client.removeBucketTagging(tagsBucketName, (err) => {\n          if (err) return done(err)\n          done()\n        })\n      })\n\n    })\n\n  })\n\n  describe('Object Tags API', ()=>{\n    //Isolate the bucket/object for easy debugging and tracking.\n    const  tagsBucketName = \"minio-js-test-tags-\" + uuid.v4()\n    before((done) => client.makeBucket(tagsBucketName, '', done))\n    after((done) => client.removeBucket(tagsBucketName, done))\n\n\n    const tagObjName = 'datafile-tags-100-kB'\n    const tagObject = Buffer.alloc(100 * 1024, 0)\n\n\n    describe('set, get and remove Tags on an object', function () {\n\n      step(`putObject(bucketName, objectName, stream)_bucketName:${tagsBucketName}, objectName:${tagObjName}, stream:100Kib_`, done => {\n        client.putObject(tagsBucketName, tagObjName, tagObject)\n          .then(() => done())\n          .catch(done)\n      })\n\n      step(`putObjectTagging  object_bucketName:${tagsBucketName}, objectName:${tagObjName},`, done => {\n        client.setObjectTagging(tagsBucketName, tagObjName, {'test-tag-key-obj':'test-tag-value-obj'}, (err) => {\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(`getObjectTagging  object_bucketName:${tagsBucketName}, objectName:${tagObjName},`, done => {\n        client.getObjectTagging(tagsBucketName, tagObjName, (err, tagList) => {\n          if (err) return done(err)\n          if(isArray(tagList)) {\n            done()\n          }\n        })\n      })\n\n      step(`removeObjectTagging on an object_bucketName:${tagsBucketName}, objectName:${tagObjName},`, done => {\n        client.removeObjectTagging(tagsBucketName, tagObjName, (err) => {\n          if (err) return done()\n          done()\n        })\n      })\n      step(`removeObject object_bucketName:${tagsBucketName}, objectName:${tagObjName},`, done => {\n        client.removeObject(tagsBucketName, tagObjName, () => {\n          done()\n        })\n      })\n    })\n\n  })\n\n  describe('Object Tags API with Versioning support', ()=>{\n    //Isolate the bucket/object for easy debugging and tracking.\n    const  tagsVersionedBucketName = \"minio-js-test-tags-version-\" + uuid.v4()\n    before((done) => client.makeBucket(tagsVersionedBucketName, '', done))\n    after((done) => client.removeBucket(tagsVersionedBucketName, done))\n\n\n    const tagObjName = 'datafile-versioned-100-kB'\n    const tagObject = Buffer.alloc(100 * 1024, 0)\n    let isVersioningSupported=false\n    let versionId=null\n\n    describe('set, get and remove Tags on a versioned object', function () {\n\n      step(`Enable Versioning on Bucket: setBucketVersioning(bucketName,versioningConfig)_bucketName:${tagsVersionedBucketName},{Status:\"Enabled\"}`,(done)=>{\n        client.setBucketVersioning(tagsVersionedBucketName,{Status:\"Enabled\"},(err)=>{\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          isVersioningSupported=true\n          done()\n        })\n      })\n\n      step(`putObject(bucketName, objectName, stream)_bucketName:${tagsVersionedBucketName}, objectName:${tagObjName}, stream:100Kib_`, done => {\n        if(isVersioningSupported) {\n          client.putObject(tagsVersionedBucketName, tagObjName, tagObject)\n            .then((res={}) => {\n              if(res.versionId){\n                versionId = res.versionId // In gateway mode versionId will not be returned.\n              }\n              done()\n            })\n            .catch(done)\n        }else{\n          done()\n        }\n      })\n\n      step(`Set tags on an object_bucketName:${tagsVersionedBucketName}, objectName:${tagObjName},`, done => {\n        if(isVersioningSupported) {\n          client.setObjectTagging(tagsVersionedBucketName, tagObjName, {'test-tag-key-obj':'test-tag-value-obj'}, {versionId:versionId}, (err) => {\n            if (err) return done(err)\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n\n      step(`Get tags on an object_bucketName:${tagsVersionedBucketName}, objectName:${tagObjName},`, done => {\n        if(isVersioningSupported) {\n          client.getObjectTagging(tagsVersionedBucketName, tagObjName,  {versionId:versionId},(err, tagList) => {\n            if (err) return done(err)\n            if(isArray(tagList)) {\n              done()\n            }\n          })}else{\n          done()\n        }\n      })\n\n      step(`remove Tags on an object_bucketName:${tagsVersionedBucketName}, objectName:${tagObjName},`, done => {\n\n        if(isVersioningSupported) {\n          client.removeObjectTagging(tagsVersionedBucketName, tagObjName,  {versionId:versionId},(err) => {\n            if (err) return done()\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n      step(`remove Tags on an object_bucketName:${tagsVersionedBucketName}, objectName:${tagObjName},`, done => {\n        if(isVersioningSupported) {\n          client.removeObject(tagsVersionedBucketName, tagObjName,  {versionId:versionId},() => {\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n    })\n\n  })\n\n  describe('Bucket Lifecycle API', ()=> {\n    const bucketName = \"minio-js-test-lifecycle-\" + uuid.v4()\n    before((done) => client.makeBucket(bucketName, '', done))\n    after((done) => client.removeBucket(bucketName, done))\n\n    describe('Set, Get Lifecycle config Tests', function () {\n      step(`Set lifecycle config on a bucket:_bucketName:${bucketName}`, done => {\n        const lifecycleConfig = {\n          Rule: [{\n            \"ID\": \"Transition and Expiration Rule\",\n            \"Status\": \"Enabled\",\n            \"Filter\": {\n              \"Prefix\":\"\",\n            },\n            \"Expiration\": {\n              \"Days\": \"3650\"\n            }\n          }]}\n        client.setBucketLifecycle(bucketName, lifecycleConfig, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(\"Set lifecycle config of a bucket\", done => {\n        client.getBucketLifecycle(bucketName, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(\"Remove lifecycle config of a bucket\", done => {\n        client.removeBucketLifecycle(bucketName, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          if (err) return done(err)\n          done()\n        })\n      })\n\n    })\n  })\n\n\n  describe('Versioning Supported preSignedUrl Get, Put Tests', function() {\n    /**\n         * Test Steps\n         * 1. Create Versioned Bucket\n         * 2. presignedPutObject of 2 Versions of different size\n         * 3. List and ensure that there are two versions\n         * 4. presignedGetObject with versionId to ensure that we are able to get\n         * 5. Remove each version\n         * 6. Cleanup bucket.\n         */\n\n    const versionedBucketName = \"minio-js-test-ver-presign\" + uuid.v4()\n    const versionedPresignObjName = 'datafile-1-b'\n    const _100_byte=Buffer.alloc(100 * 1024, 0)\n    const _200_byte=Buffer.alloc(200 * 1024, 0)\n    let isVersioningSupported=false\n    const objectsList = []\n\n\n\n    function putPreSignedObject (bucketName, objectName, expires=1000, _incoming_obj,cb) {\n      client.presignedPutObject(bucketName, objectName, expires, (e, presignedUrl) => {\n        if (e) {\n          cb && cb()\n        }\n        let mobileClientReqWithProtocol = http\n        var upldRequestOptions = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n        upldRequestOptions.method = 'PUT'\n        upldRequestOptions.headers = {\n          'content-length': _incoming_obj.length\n        }\n        if (upldRequestOptions.protocol === 'https:') {\n          mobileClientReqWithProtocol = https\n        }\n        const uploadRequest = mobileClientReqWithProtocol.request(upldRequestOptions, (response) => {\n          if (response.statusCode !== 200) return new Error(`error on put : ${response.statusCode}`)\n          response.on('error', () => {\n            cb && cb()\n          })\n          response.on('end', () => {\n            cb && cb()\n          })\n          response.on('data', () => {\n          })\n        })\n\n        uploadRequest.on('error', () => {\n          cb && cb()\n        })\n\n        uploadRequest.write(_incoming_obj)\n        uploadRequest.end()\n      })\n\n    }\n\n\n    before((done) => client.makeBucket(versionedBucketName, '', ()=>{\n      client.setBucketVersioning(versionedBucketName,{Status:\"Enabled\"},(err)=>{\n        if (err && err.code === 'NotImplemented') return done()\n        if (err) return done(err)\n        isVersioningSupported = true\n        done()\n      })\n\n    }))\n    after((done) => client.removeBucket(versionedBucketName, done))\n\n\n    step(`presignedPutObject(bucketName, objectName, expires=1000, _incoming_obj,cb)_bucketName:${versionedBucketName} ${versionedPresignObjName} _version 1`, done => {\n      if(isVersioningSupported) {\n        putPreSignedObject(versionedBucketName,versionedPresignObjName,1000,_100_byte,()=>{\n          done()\n        })\n      }else {\n        done()\n      }\n    })\n\n    step(`presignedPutObject(bucketName, objectName, expires=1000, _incoming_obj,cb)_bucketName:${versionedBucketName} ${versionedPresignObjName} _version 2`, done => {\n      if(isVersioningSupported) {\n        putPreSignedObject(versionedBucketName,versionedPresignObjName,1000,_200_byte,()=>{\n          done()\n        })\n      }else {\n        done()\n      }\n    })\n\n    step(`listObjects(bucketName, objectName, expires=1000, _incoming_obj,cb)_bucketName:${versionedBucketName} ${versionedPresignObjName} _version 2`, done => {\n      if(isVersioningSupported) {\n        const objectsStream = client.listObjects(versionedBucketName, '', true,{IncludeVersion: true})\n        objectsStream.on('data', function(obj) {\n          objectsList.push({VersionId:obj.versionId, Key:obj.name})\n        })\n\n        objectsStream.on('error', function() {\n          return done()\n        })\n        objectsStream.on('end', function() {\n          if(objectsList.length === 2) {\n            // 2 versions need to be listed.\n            done()\n          }else{\n            return  done(new Error(\"Version count does not match for versioned presigned url test.\"))\n          }\n        })\n      }else {\n        done()\n      }\n    })\n\n    step(`presignedGetObject(bucketName, objectName, expires, respHeaders, requestDate, versionId, cb)_bucketName:${versionedBucketName} ${versionedPresignObjName} first version`, done => {\n      if(isVersioningSupported) {\n        client.presignedGetObject(versionedBucketName, versionedPresignObjName, 1000, {versionId: objectsList[1].VersionId},new Date(), (e, presignedUrl) => {\n          if (e) {\n            return done()\n          }\n          let mobileClientReqWithProtocol = http\n          const getReqOpts = _.pick(url.parse(presignedUrl), ['hostname', 'port', 'path', 'protocol'])\n          getReqOpts.method = 'GET'\n          const _100kbmd5 = crypto.createHash('md5').update(_100_byte).digest('hex')\n\n          const hash = crypto.createHash('md5')\n          if (getReqOpts.protocol === 'https:') {\n            mobileClientReqWithProtocol = https\n          }\n          const request = mobileClientReqWithProtocol.request(getReqOpts, (response) => {\n            //if delete marker. method not allowed.\n            if (response.statusCode !== 200) return new Error(`error on get : ${response.statusCode}`)\n            response.on('error', () => {\n              return done()\n            })\n            response.on('end', () => {\n              const hashValue =hash.digest('hex')\n              if ( hashValue === _100kbmd5) {\n                done()\n              }else{\n                return done(new Error(\"Unable to retrieve version of an object using presignedGetObject\"))\n              }\n            })\n            response.on('data', (data) => {\n              hash.update(data)\n            })\n          })\n          request.on('error', () =>{\n            return done()\n          })\n          request.end()\n        })\n      }else {\n        done()\n      }\n    })\n\n    step(`removeObject(bucketName, objectName, removeOpts)_bucketName:${versionedBucketName} _${versionedPresignObjName} _${objectsList.length} versions`, done => {\n      if(isVersioningSupported) {\n        let count = 0\n        objectsList.forEach((objItem)=>{\n          client.removeObject(versionedBucketName, objItem.Key,{versionId:objItem.VersionId}, function(e) {\n            if (e) {\n              done()\n            }\n            count +=1\n            if(count === 2){\n              //2 versions expected to be deleted.\n              done()\n            }\n          })\n        })\n      }else {\n        done()\n      }\n    })\n  })\n\n\n  describe('Object Lock API Bucket Options Test', ()=>{\n    //Isolate the bucket/object for easy debugging and tracking.\n    //Gateway mode does not support this header.\n\n    describe('Object Lock support makeBucket API Tests', function () {\n      const  lockEnabledBucketName = \"minio-js-test-lock-mb-\" + uuid.v4()\n      let isFeatureSupported = false\n      step(`Check if bucket with object lock can be created:_bucketName:${lockEnabledBucketName}`, done => {\n        client.makeBucket(lockEnabledBucketName, { ObjectLocking: true }, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          isFeatureSupported= true\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(`Get lock config on a bucket:_bucketName:${lockEnabledBucketName}`, done => {\n        if(isFeatureSupported) {\n          client.getObjectLockConfig(lockEnabledBucketName, (err) => {\n            if (err && err.code === 'NotImplemented') return done()\n            if (err) return done(err)\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n\n      step(`Check if bucket can be deleted:_bucketName:${lockEnabledBucketName}`, done => {\n        client.removeBucket(lockEnabledBucketName, (err) => {\n          if(isFeatureSupported) {\n            if (err && err.code === 'NotImplemented') return done()\n            if (err) return done(err)\n            done()\n          }else{\n            done()\n          }\n        })\n      })\n\n    })\n\n    describe('Object Lock support Set/Get API Tests', function () {\n      const  lockConfigBucketName = \"minio-js-test-lock-conf-\" + uuid.v4()\n      let isFeatureSupported = false\n      step(`Check if bucket with object lock can be created:_bucketName:${lockConfigBucketName}`, done => {\n        client.makeBucket(lockConfigBucketName, { ObjectLocking: true }, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          isFeatureSupported= true\n          if (err) return done(err)\n          done()\n        })\n      })\n      step(`Update or replace lock config on a bucket:_bucketName:${lockConfigBucketName}`, done => {\n        if(isFeatureSupported) {\n          client.setObjectLockConfig(lockConfigBucketName, {mode:\"GOVERNANCE\",unit:'Years', validity:2 }, (err) => {\n            if (err && err.code === 'NotImplemented') return done()\n            if (err) return done(err)\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n      step(`Get lock config on a bucket:_bucketName:${lockConfigBucketName}`, done => {\n        if(isFeatureSupported) {\n          client.getObjectLockConfig(lockConfigBucketName, (err) => {\n            if (err && err.code === 'NotImplemented') return done()\n            if (err) return done(err)\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n\n      step(`Set lock config on a bucket:_bucketName:${lockConfigBucketName}`, done => {\n        if(isFeatureSupported) {\n          client.setObjectLockConfig(lockConfigBucketName, {}, (err) => {\n            if (err && err.code === 'NotImplemented') return done()\n            if (err) return done(err)\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n      step(`Get and verify lock config on a bucket after reset/update:_bucketName:${lockConfigBucketName}`, done => {\n        if(isFeatureSupported) {\n          client.getObjectLockConfig(lockConfigBucketName, (err) => {\n            if (err && err.code === 'NotImplemented') return done()\n            if (err) return done(err)\n            done()\n          })\n        }else{\n          done()\n        }\n      })\n\n      step(`Check if bucket can be deleted:_bucketName:${lockConfigBucketName}`, done => {\n        client.removeBucket(lockConfigBucketName, (err) => {\n          if(isFeatureSupported) {\n            if (err && err.code === 'NotImplemented') return done()\n            if (err) return done(err)\n            done()\n          }else{\n            done()\n          }\n        })\n      })\n\n    })\n\n  })\n\n  describe('Object retention API Tests', ()=>{\n    //Isolate the bucket/object for easy debugging and tracking.\n    //Gateway mode does not support this header.\n\n    describe('Object retention get/set API Test', function () {\n      const  objRetentionBucket = \"minio-js-test-retention-\" + uuid.v4()\n      const retentionObjName = \"RetentionObject\"\n      let isFeatureSupported = false\n      let versionId = null\n\n      step(`Check if bucket with object lock can be created:_bucketName:${objRetentionBucket}`, done => {\n        client.makeBucket(objRetentionBucket, { ObjectLocking: true }, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          isFeatureSupported= true\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(`putObject(bucketName, objectName, stream)_bucketName:${objRetentionBucket}, objectName:${retentionObjName}, stream:100Kib_`, done => {\n        //Put two versions of the same object.\n        if(isFeatureSupported) {\n          client.putObject(objRetentionBucket, retentionObjName,  readableStream(_1byte), _1byte.length, {})\n            .then(() => done())\n            .catch(done)\n        }else{\n          done()\n        }\n      })\n\n      step(`statObject(bucketName, objectName, statOpts)_bucketName:${objRetentionBucket}, objectName:${retentionObjName}`, done => {\n        if(isFeatureSupported) {\n          client.statObject(objRetentionBucket, retentionObjName, {}, (e, res) => {\n            versionId = res.versionId\n            done()\n          })\n        }else{\n          done()\n        }\n\n      })\n\n      step(`putObjectRetention(bucketName, objectName, putOpts)_bucketName:${objRetentionBucket}, objectName:${retentionObjName}`, done => {\n        //Put two versions of the same object.\n        if(isFeatureSupported) {\n          let expirationDate = new Date()\n          //set expiry to start of next day.\n          expirationDate.setDate(expirationDate.getDate() + 1)\n          expirationDate.setUTCHours(0,0,0,0)//Should be start of the day.(midnight)\n\n          client.putObjectRetention(objRetentionBucket, retentionObjName,  {\n            governanceBypass:true,\n            mode:\"GOVERNANCE\",\n            retainUntilDate:expirationDate.toISOString(),\n            versionId:versionId\n          })\n            .then(() => done())\n            .catch(done)\n        }else{\n          done()\n        }\n      })\n\n      step(`getObjectRetention(bucketName, objectName, getOpts)_bucketName:${objRetentionBucket}, objectName:${retentionObjName}`, done => {\n        if(isFeatureSupported) {\n          client.getObjectRetention(objRetentionBucket, retentionObjName, {versionId:versionId}, () => {\n            done()\n          })\n        }else{\n          done()\n        }\n\n      })\n\n      step(`removeObject(bucketName, objectName, removeOpts)_bucketName:${objRetentionBucket}, objectName:${retentionObjName}`, done => {\n        if(isFeatureSupported) {\n          client.removeObject(objRetentionBucket, retentionObjName, {versionId:versionId, governanceBypass:true}, () => {\n            done()\n          })\n        }else{\n          done()\n        }\n\n      })\n\n      step(`removeBucket(bucketName, )_bucketName:${objRetentionBucket}`, done => {\n        if(isFeatureSupported) {\n          client.removeBucket(objRetentionBucket,  () => {\n            done()\n          })\n        }else{\n          done()\n        }\n\n      })\n\n    })\n  })\n\n  describe('Bucket Encryption Related APIs', ()=> {\n    //Isolate the bucket/object for easy debugging and tracking.\n    //this is not supported in gateway mode.\n    const encBucketName = \"minio-js-test-bucket-enc-\" + uuid.v4()\n    before((done) => client.makeBucket(encBucketName, '', done))\n    after((done) => client.removeBucket(encBucketName, done))\n\n\n    const encObjName = 'datafile-to-encrypt-100-kB'\n    const encObjFileContent = Buffer.alloc(100 * 1024, 0)\n    let isEncryptionSupported = false\n\n    step(`Set Encryption on a bucket:_bucketName:${encBucketName}`, done => {\n      // setBucketEncryption succeeds in NAS mode.\n      const buckEncPromise = client.setBucketEncryption(encBucketName)\n      buckEncPromise.then(() => {\n        done()\n      })\n        .catch(() => {\n          done()\n        })\n    })\n\n    step(`Get encryption of a bucket:_bucketName:${encBucketName}`, done => {\n      const getBucEncObj = client.getBucketEncryption(encBucketName)\n      getBucEncObj.then(() => {\n        done()\n      })\n        .catch((err) => {\n          if (err && err.code === 'NotImplemented') {\n            isEncryptionSupported = false\n            return done()\n          }\n          if (err) return done(err)\n\n          done()\n        })\n    })\n\n    step(`Put an object to check for default encryption bucket:_bucketName:${encBucketName}, _objectName:${encObjName}`, done => {\n      if(isEncryptionSupported) {\n        const putObjPromise =  client.putObject(encBucketName, encObjName, encObjFileContent)\n        putObjPromise.then(() => {\n          done()\n        })\n          .catch(() => {\n            done()\n          })\n      }else{\n        done()\n      }\n    })\n\n    step(`Stat of an object to check for default encryption applied on a bucket:_bucketName:${encBucketName}, _objectName:${encObjName}`, done => {\n      if(isEncryptionSupported) {\n        const statObjPromise = client.statObject(encBucketName, encObjName)\n        statObjPromise.then(() => {\n          done()\n        })\n          .catch(() => {\n            done()\n          })\n      }else{\n        done()\n      }\n    })\n\n    step(`Stat of an object to check for default encryption applied on a bucket:_bucketName:${encBucketName}`, done => {\n      if(isEncryptionSupported) {\n        const getBuckEnc = client.getBucketEncryption(encBucketName)\n        getBuckEnc.then(() => {\n          done()\n        })\n          .catch(() => {\n            done()\n          })\n      }else{\n        done()\n      }\n    })\n\n    step(`Remove object on a bucket:_bucketName:${encBucketName}, _objectName:${encObjName}`, done => {\n      if(isEncryptionSupported) {\n        const removeObj = client.removeObject(encBucketName,encObjName)\n        removeObj.then(() => {\n          done()\n        })\n          .catch(() => {\n            done()\n          })\n      }else{\n        done()\n      }\n    })\n\n    step(`Remove encryption on a bucket:_bucketName:${encBucketName}`, done => {\n      if(isEncryptionSupported) {\n        const removeObj = client.removeBucketEncryption(encBucketName)\n        removeObj.then(() => {\n          done()\n        })\n          .catch(() => {\n            done()\n          })\n      }else{\n        done()\n      }\n    })\n    step(`Get encryption on a bucket:_bucketName:${encBucketName}`, done => {\n      if(isEncryptionSupported) {\n        const getBuckEnc = client.getBucketEncryption(encBucketName)\n        getBuckEnc.then(() => {\n          done()\n        })\n          .catch(() => {\n            done()\n          })\n      }else{\n        done()\n      }\n    })\n\n  })\n\n  describe('Bucket Replication API Tests', ()=> {\n    //TODO - As of now, there is no api to get arn programmatically to setup replication through APIs and verify.\n    //Please refer to minio server documentation and mc cli.\n    //https://docs.min.io/docs/minio-bucket-replication-guide.html\n    //https://docs.min.io/minio/baremetal/replication/replication-overview.html#minio-bucket-replication-clientside\n  })\n\n  describe('Object Legal hold API Tests', ()=>{\n    //Isolate the bucket/object for easy debugging and tracking.\n    //Gateway mode does not support this header.\n    let versionId = null\n    describe('Object Legal hold get/set API Test', function () {\n      const objLegalHoldBucketName = \"minio-js-test-legalhold-\" + uuid.v4()\n      const objLegalHoldObjName = \"LegalHoldObject\"\n      let isFeatureSupported = false\n\n\n      step(`Check if bucket with object lock can be created:_bucketName:${objLegalHoldBucketName}`, done => {\n        client.makeBucket(objLegalHoldBucketName, {ObjectLocking: true}, (err) => {\n          if (err && err.code === 'NotImplemented') return done()\n          isFeatureSupported = true\n          if (err) return done(err)\n          done()\n        })\n      })\n\n      step(`putObject(bucketName, objectName, stream)_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}, stream:100Kib_`, done => {\n        if (isFeatureSupported) {\n          client.putObject(objLegalHoldBucketName, objLegalHoldObjName, readableStream(_1byte), _1byte.length, {})\n            .then(() => done())\n            .catch(done)\n        } else {\n          done()\n        }\n      })\n\n      step(`statObject(bucketName, objectName, statOpts)_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}`, done => {\n        if (isFeatureSupported) {\n          client.statObject(objLegalHoldBucketName, objLegalHoldObjName, {}, (e, res) => {\n            versionId = res.versionId\n            done()\n          })\n        } else {\n          done()\n        }\n      })\n\n      step(`setObjectLegalHold(bucketName, objectName, setOpts={})_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}`, done => {\n        if (isFeatureSupported) {\n          client.setObjectLegalHold(objLegalHoldBucketName, objLegalHoldObjName, () => {\n            done()\n          })\n        } else {\n          done()\n        }\n      })\n\n      step(`setObjectLegalHold(bucketName, objectName, setOpts={})_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}`, done => {\n        if (isFeatureSupported) {\n          client.setObjectLegalHold(objLegalHoldBucketName, objLegalHoldObjName, {status:\"ON\", versionId:versionId}, () => {\n            done()\n          })\n        } else {\n          done()\n        }\n\n      })\n\n      step(`getObjectLegalHold(bucketName, objectName, setOpts={})_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}`, done => {\n        if (isFeatureSupported) {\n          client.getObjectLegalHold(objLegalHoldBucketName, objLegalHoldObjName, () => {\n            done()\n          })\n        } else {\n          done()\n        }\n      })\n\n      step(`setObjectLegalHold(bucketName, objectName, setOpts={})_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}`, done => {\n        if (isFeatureSupported) {\n          client.setObjectLegalHold(objLegalHoldBucketName, objLegalHoldObjName, {status:\"OFF\", versionId:versionId}, () => {\n            done()\n          })\n        } else {\n          done()\n        }\n\n      })\n\n      step(`getObjectLegalHold(bucketName, objectName, setOpts={})_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}`, done => {\n        if (isFeatureSupported) {\n          client.getObjectLegalHold(objLegalHoldBucketName, objLegalHoldObjName, {versionId:versionId}, () => {\n            done()\n          })\n        } else {\n          done()\n        }\n\n      })\n\n      step(`removeObject(bucketName, objectName, removeOpts)_bucketName:${objLegalHoldBucketName}, objectName:${objLegalHoldObjName}`, done => {\n        if(isFeatureSupported) {\n          client.removeObject(objLegalHoldBucketName, objLegalHoldObjName, {versionId:versionId, governanceBypass:true}, () => {\n            done()\n          })\n        }else{\n          done()\n        }\n\n      })\n\n      step(`removeBucket(bucketName, )_bucketName:${objLegalHoldBucketName}`, done => {\n        if(isFeatureSupported) {\n          client.removeBucket(objLegalHoldBucketName,  () => {\n            done()\n          })\n        }else{\n          done()\n        }\n\n      })\n\n    })})\n})\n"],"file":"functional-tests.js"}